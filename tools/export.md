To keep maintenance effort low for Osmic the repository contains only the base or "source" versions of icons. All the derivative versions can be generated by using a script.

This Python export script ([tools/export.py](https://github.com/nebulon42/osmic/blob/master/tools/export.py)) enables you to create your own customised collection of icons. It is able to:

* add padding
* add halos/outlines
* add shields
* re-colour icons
* create icon sprites
* create an icon font with the help of [Font Custom](https://github.com/FontCustom/fontcustom/)
* export as SVG and PNG (through rsvg or Inkscape) with different resolutions including retina (double sized) versions.

All parameters can be changed through a YAML configuration file. There are several examples in the script folder:

* [font.yaml](https://github.com/nebulon42/osmic/blob/master/tools/font.yaml) creates an icon font of all icons.
* [osm-carto-png.yaml](https://github.com/nebulon42/osmic/blob/master/tools/osm-carto-png.yaml) exports icons as PNG and re-colours them according to the colour scheme of [openstreetmap-carto](https://github.com/gravitystorm/openstreetmap-carto).
* [osm-carto-svg.yaml](https://github.com/nebulon42/osmic/blob/master/tools/osm-carto-svg.yaml) exports icons in SVG format like they are currently used in [openstreetmap-carto](https://github.com/gravitystorm/openstreetmap-carto) i.e. with 1px padding and without halo.
* [osm-carto-svg-color.yaml](https://github.com/nebulon42/osmic/blob/master/tools/osm-carto-svg-color.yaml) exports icons in SVG format like they are currently used in [openstreetmap-carto](https://github.com/gravitystorm/openstreetmap-carto) i.e. with 1px padding and without halo and re-colours them according to their colour scheme.
* [shields.yaml](https://github.com/nebulon42/osmic/blob/master/tools/shields.yaml) exports icons with shields.
* [sprites.yaml](https://github.com/nebulon42/osmic/blob/master/tools/sprites.yaml) exports the icons in a sprite like [this one](https://github.com/nebulon42/osmic/blob/master/icons@2x.png).

Such a configuration file must be supplied to the script as parameter e.g. execute `./tools/export.py tools/shields.yaml` in the main folder of Osmic.

The configuration file follows a simple organisational pattern for maximum versatility: all global icon parameters can be overridden by parameters specific to a certain icon id (except for sprites where only the colour can be changed). This is e.g. how re-colouring of icons works. An example of this pattern can be found in [osm-carto-png.yaml](https://github.com/nebulon42/osmic/blob/master/tools/osm-carto-png.yaml) where the global fill colour of `#734a08` is changed for the icon id `peak` to `#d08f55`.

In the following all possible parameters are listed. All of them are optional.

* `basedir` - specify the location based of which relative paths should be evaluated, if not specified it defaults to the location of the configuration file, must be an absolute path

* `input` - specify the input base directory, if not specified it defaults to the current working directory, can be either an absolute or relative path

* `input_dirs` - specify a list of directory names from which the icon files are read, useful if only a subset of icons should be processed, if not specified the script reads icons from the base directory

* `output` - specify the output base directory, if not specified it defaults to `./export`, can be either an absolute or relative path

* `empty_output` - specify whether the output base directory should be emptied of all contents, the value must be either `true` or `false`, if not specified it defaults to `false`, *WARNING*: deletes all files in the output base directory if it already exists, **be careful** with existing data as all sample config files currently use this option!

* `format` - is either `png`, `svg`, `sprite` or `font`, if not specified it defaults to `png`

* `dpi` - specify the resolution in dots per inch (dpi), if not specified it defaults to `90`

* `retina` - specify whether double sized (retina) versions should be generated, the value must be either `true` or `false`, if not specified it defaults to `false`, makes only sense to specify for `format: "png"` or `format: "sprite"`, it is ignored otherwise

* `global_style` - a list of global styles such as padding, halo, fill colour etc. for each icon, the following parameters are sub-elements of `global_style` or an icon id element e.g. `hunting-stand`.

  * `padding` - specify number of pixels of space between the icon shape and canvas border, the icon stays centred all the times, only values > 0 are allowed, defaults to `0`

  * `fill` - specify a hexadecimal colour value for the icon fill e.g. `#efefef`, if not specified the colour fill stays `#000000` (black)

  * `halo` - a list of styles related to icon halos/outlines such as fill colour, width and opacity
    * `fill` - specify a hexadecimal colour value for the halo fill e.g. `#efefef`, if not specified the colour fill defaults to `#ffffff` (white)
    * `width` - specify the width of the halo in pixels, if not specified it defaults to `1`
    * `opacity` - specify the opacity of the halo in values of 0 (transparent) .. 1 (opaque), if not specified it defaults to `0.3`

  * `shield` - a list of styles related to icon shields such as fills and strokes
    * `fill` - specify a hexadecimal colour value for the shield fill e.g. `#efefef`, if not specified the colour fill defaults to `#000000` (black)
    * `stroke_fill` - specify a hexadecimal colour value for the stroke fill e.g. `#efefef`, if not specified no stroke will be drawn
    * `stroke_width` - specify a stroke width in pixels, only values > 0 are allowed, if not specified no stroke will be drawn
    * `rounded` - specify the corner radius of the shield, only values > 0 are allowed, if not specified defaults to `0` (unrounded corners)
    * `size` - specify the width/height of the shield, only sizes > 0 and > the base canvas size (14px) are allowed, will round to the next smaller even number if an odd number is specified

* `sprite` - a list of styles such as columns and padding for generating sprites, makes only sense to specify for `format: "sprite"`, it is ignored otherwise
  * `cols` - specify the number of columns of the sprite i.e. how many icons will be displayed in one row, only values > 0 are allowed, if not specified defaults to `12`
  * `outer_padding`- specify the padding at the outer border of all icons, only values > 0 are allowed, if not specified defaults to `4`
  * `icon_padding`- specify the padding between the different icons, only values > 0 are allowed, if not specified defaults to `4`	
  * `background`- specify a hexadecimal colour value for the sprite background fill e.g. `#efefef`, if not specified it defaults to transparent
  * `filename`- specify the filename of the sprite, if not specified defaults to `sprite`
  * `size_filter` - specify the size version (e.g. 14 for all icon-id-14.svg) which should be included in the sprite - all other sizes are left out, if not specified no filter is applied

* `font` - a list of configuration options for icon font generation
  * `output` - specify the output directory for the font files, if not specified it defaults to `./font`, can be either an absolute or relative path
  * `size_filter` - specify the size version (e.g. 14 for all icon-id-14.svg) which should be included in the icon font - all other sizes are left out, if not specified the filter defaults to 14
